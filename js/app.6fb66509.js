(function(){"use strict";var e={936:function(e,t,o){var a=o(963),n=o(252);const i={class:"container"};function s(e,t,o,a,s,r){const l=(0,n.up)("side-bar"),c=(0,n.up)("view-image");return(0,n.wg)(),(0,n.iD)("body",null,[(0,n._)("div",i,[(0,n.Wm)(l),(0,n.Wm)(c)])])}var r=o(577);const l={class:"side_bar"},c={class:"side_bar__main"},d={class:"btns"},h={class:"main__items"};function v(e,t,o,a,i,s){const v=(0,n.up)("size-svg"),g=(0,n.up)("box-svg"),u=(0,n.up)("full-screen-svg"),m=(0,n.up)("file-item");return(0,n.wg)(),(0,n.iD)("div",l,[(0,n._)("main",c,[(0,n._)("div",d,[(0,n.Wm)(v,{class:(0,r.C_)({active:"x"===a.typeImage}),onClick:t[0]||(t[0]=e=>a.changeTypeImage("x")),style:{transform:"rotate(90deg)"}},null,8,["class"]),(0,n.Wm)(v,{class:(0,r.C_)({active:"y"===a.typeImage}),onClick:t[1]||(t[1]=e=>a.changeTypeImage("y"))},null,8,["class"]),(0,n.Wm)(g,{class:(0,r.C_)({active:"1x1"===a.typeImage}),onClick:t[2]||(t[2]=e=>a.changeTypeImage("1x1"))},null,8,["class"]),(0,n.Wm)(u,{class:(0,r.C_)({active:"xy"===a.typeImage}),onClick:t[3]||(t[3]=e=>a.changeTypeImage("xy"))},null,8,["class"])]),(0,n._)("div",h,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.files,(e=>((0,n.wg)(),(0,n.j4)(m,{key:e.id,dataFile:e},null,8,["dataFile"])))),128))])])])}var g=o(262),u=o(907);const m={xmlns:"http://www.w3.org/2000/svg",height:"30px",width:"30px",viewBox:"0 0 48 48"},p=(0,n._)("path",{d:"m24 42-9-9 2.2-2.2 6.8 6.8 6.8-6.8L33 33Zm-6.8-24.6L15 15.2l9-9 9 9-2.2 2.2-6.8-6.8Z"},null,-1),f=[p];function w(e,t,o,a,i,s){return(0,n.wg)(),(0,n.iD)("svg",m,f)}var y={setup(){return{}}},_=o(744);const x=(0,_.Z)(y,[["render",w]]);var I=x;const P={xmlns:"http://www.w3.org/2000/svg",height:"30px",width:"30px",viewBox:"0 0 48 48"},b=(0,n._)("path",{d:"M9 42q-1.2 0-2.1-.9Q6 40.2 6 39V9q0-1.2.9-2.1Q7.8 6 9 6h30q1.2 0 2.1.9.9.9.9 2.1v30q0 1.2-.9 2.1-.9.9-2.1.9Zm0-3h30V9H9v30Z"},null,-1),H=[b];function Z(e,t,o,a,i,s){return(0,n.wg)(),(0,n.iD)("svg",P,H)}var F={setup(){return{}}};const S=(0,_.Z)(F,[["render",Z]]);var W=S;const k={xmlns:"http://www.w3.org/2000/svg",height:"30px",width:"30px",viewBox:"0 0 48 48"},C=(0,n._)("path",{d:"M10 38v-9.65h3V35h6.65v3Zm0-18.35V10h9.65v3H13v6.65ZM28.35 38v-3H35v-6.65h3V38ZM35 19.65V13h-6.65v-3H38v9.65Z"},null,-1),O=[C];function q(e,t,o,a,i,s){return(0,n.wg)(),(0,n.iD)("svg",k,O)}var j={setup(){return{}}};const D=(0,_.Z)(j,[["render",q]]);var T=D;const M={key:0,class:"main__item"},L={key:0,class:"main__items"},V={key:1,class:"main__item"};function B(e,t,o,i,s,l){const c=(0,n.up)("file-item",!0),d=(0,n.up)("image-svg");return"dir"===o.dataFile.type?((0,n.wg)(),(0,n.iD)("div",M,[(0,n._)("div",{class:(0,r.C_)(["main__item_wrapper",{active:i.isOpen}])},[(0,n._)("div",{class:"main__item__info",onClick:t[0]||(t[0]=e=>i.openFolder(o.dataFile.id))},[((0,n.wg)(),(0,n.j4)((0,n.LL)(i.isOpen?"folder-open-svg":"folder-svg"))),(0,n.Uk)(" "+(0,r.zw)(o.dataFile.name),1)])],2),(0,n.Wm)(a.uT,{name:"expand",onEnter:i.enter,onAfterEnter:i.afterEnter,onLeave:i.leave},{default:(0,n.w5)((()=>[i.isOpen?((0,n.wg)(),(0,n.iD)("div",L,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.files,(e=>((0,n.wg)(),(0,n.j4)(c,{class:"subItem",key:e.id+Date.now(),dataFile:e},null,8,["dataFile"])))),128))])):(0,n.kq)("",!0)])),_:1},8,["onEnter","onAfterEnter","onLeave"])])):((0,n.wg)(),(0,n.iD)("div",V,[(0,n._)("div",{class:(0,r.C_)(["main__item_wrapper files",{active_photo:o.dataFile===e.$store.state.selectedPhoto}])},[(0,n._)("div",{class:"main__item__info",onClick:t[1]||(t[1]=e=>i.selectPhoto(o.dataFile))},[(0,n.Wm)(d),(0,n.Uk)(" "+(0,r.zw)(o.dataFile.name),1)])],2)]))}const Q={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"20px",height:"20px"},E=(0,n._)("path",{d:"M7.05 40q-1.2 0-2.1-.925-.9-.925-.9-2.075V11q0-1.15.9-2.075Q5.85 8 7.05 8h14l3 3h17q1.15 0 2.075.925.925.925.925 2.075v23q0 1.15-.925 2.075Q42.2 40 41.05 40Zm0-29v26h34V14H22.8l-3-3H7.05Zm0 0v26Z"},null,-1),$=[E];function z(e,t,o,a,i,s){return(0,n.wg)(),(0,n.iD)("svg",Q,$)}var N={setup(){return{}}};const J=(0,_.Z)(N,[["render",z]]);var R=J;const U={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"20px",height:"20px"},Y=(0,n._)("path",{d:"M7 40q-1.15 0-2.075-.925Q4 38.15 4 37V11q0-1.15.925-2.075Q5.85 8 7 8h14.05l3 3H41q1.15 0 2.075.925Q44 12.85 44 14H22.75l-3-3H7v26l5.1-20H47l-5.35 20.7q-.3 1.2-1.1 1.75T38.5 40Zm3.15-3h28.6l4.2-17h-28.6Zm0 0 4.2-17-4.2 17ZM7 14v-3 3Z"},null,-1),A=[Y];function K(e,t,o,a,i,s){return(0,n.wg)(),(0,n.iD)("svg",U,A)}var G={setup(){return{}}};const X=(0,_.Z)(G,[["render",K]]);var ee=X;const te={xmlns:"http://www.w3.org/2000/svg",height:"18",width:"18",viewBox:"0 0 48 48"},oe=(0,n._)("path",{d:"M9 42q-1.2 0-2.1-.9Q6 40.2 6 39V9q0-1.2.9-2.1Q7.8 6 9 6h30q1.2 0 2.1.9.9.9.9 2.1v30q0 1.2-.9 2.1-.9.9-2.1.9Zm0-3h30V9H9v30Zm2.8-4.85h24.45l-7.35-9.8-6.6 8.55-4.65-6.35ZM9 39V9v30Z"},null,-1),ae=[oe];function ne(e,t,o,a,i,s){return(0,n.wg)(),(0,n.iD)("svg",te,ae)}var ie={setup(){return{}}};const se=(0,_.Z)(ie,[["render",ne]]);var re=se,le={name:"fileItem",props:{dataFile:{type:Object,required:!1,default:()=>{}}},components:{folderSvg:R,folderOpenSvg:ee,imageSvg:re},setup(){const e=(0,u.oR)(),t=(0,g.iH)(!1),o=(0,g.iH)([]);(0,n.bv)((()=>{}));const a=async a=>(t.value||(o.value=await e.dispatch("loadFilesById",a)),t.value=!t.value),i=t=>{e.commit("selectPhoto",t),e.commit("setLocalStoragePhotosItems")},s=e=>{e.style.height="auto";const t=getComputedStyle(e).height;e.style.height=0,getComputedStyle(e),setTimeout((()=>{e.style.height=t}))},r=e=>{e.style.height="auto"},l=e=>{e.style.height=getComputedStyle(e).height,getComputedStyle(e),setTimeout((()=>{e.style.height=0}))};return{isOpen:t,openFolder:a,files:o,selectPhoto:i,enter:s,afterEnter:r,leave:l}}};const ce=(0,_.Z)(le,[["render",B],["__scopeId","data-v-1241dba2"]]);var de=ce,he={components:{fileItem:de,sizeSvg:I,boxSvg:W,fullScreenSvg:T},setup(){const e=(0,u.oR)(),t=(0,g.iH)(0),o=(0,n.Fl)((()=>e.state.files[t.value])),a=(0,n.Fl)((()=>e.state.typeImage)),i=t=>{t!==a.value&&e.commit("changeTypeImage",t)};return{files:o,typeImage:a,changeTypeImage:i,parentId:t}}};const ve=(0,_.Z)(he,[["render",v],["__scopeId","data-v-47aea7b8"]]);var ge=ve;const ue={class:"view_image",ref:"parent"},me={class:"image"},pe={ref:"myCanvas"};function fe(e,t,o,a,i,s){const r=(0,n.up)("arrow-svg");return(0,n.wg)(),(0,n.iD)("div",ue,[(0,n._)("div",me,[(0,n._)("canvas",pe,null,512),(0,n._)("div",{class:"btn left",onClick:t[0]||(t[0]=t=>e.$store.commit("prevPhoto"))},[(0,n.Wm)(r,{rotate:180})]),(0,n._)("div",{class:"btn right",onClick:t[1]||(t[1]=t=>e.$store.commit("nextPhoto"))},[(0,n.Wm)(r)])])],512)}const we=(e,t,o,a,n)=>{const i={cuttedWidth:0,cuttedHeight:0,imgWidth:0,imgHeight:0,canvasStartWidth:0,canvasStartHeight:0,canvasWidth:0,canvasHeight:0};if(i.imgWidth=e,i.imgHeight=t,"1x1"===n){const n=Math.min(o,a);i.canvasWidth=n,i.canvasHeight=n,e<t?(i.cuttedHeight=(t-e)/2,i.imgHeight=e):e>t&&(i.cuttedWidth=(e-t)/2,i.imgWidth=t)}else if("x"===n){const a=e/o;i.canvasWidth=o,i.canvasHeight=t/a}else if("y"===n){const o=t/a;i.canvasHeight=a,i.canvasWidth=e/o}else if("xy"===n){i.canvasWidth=o,i.canvasHeight=a;const n=e/t,s=o/a,r=e/n,l=t*n;n>1?(i.imgWidth=r*s,i.cuttedWidth=(e-i.imgWidth)/2):n<1&&(i.imgHeight=l/s,i.cuttedHeight=(t-i.imgHeight)/2)}return i},ye=e=>((0,n.dD)("data-v-7d8b3e66"),e=e(),(0,n.Cn)(),e),_e=ye((()=>(0,n._)("path",{d:"M1 41L21 21L1 1",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1))),xe=[_e];function Ie(e,t,o,a,i,s){return(0,n.wg)(),(0,n.iD)("svg",{class:"arrow",style:(0,r.j5)(`transform: rotate(${o.rotate}deg)`),width:"22",height:"42",viewBox:"0 0 22 42",fill:"none",xmlns:"http://www.w3.org/2000/svg"},xe,4)}var Pe={props:{rotate:{type:Number,required:!1}},setup(){return{}}};const be=(0,_.Z)(Pe,[["render",Ie],["__scopeId","data-v-7d8b3e66"]]);var He=be,Ze={components:{arrowSvg:He},setup(){const e=(0,u.oR)(),t=(0,g.iH)(null),o=(0,g.iH)(null),a=(0,g.iH)(null);(0,n.bv)((async()=>{o.value=t.value.getContext("2d")}));const i=async()=>{const n=new Image;n.src=e.getters["imgUrl"],n.onload=async()=>{let e=await n.width,i=await n.height,s=we(e,i,a.value.clientWidth,a.value.clientHeight,r.value);t.value.height=s.canvasHeight,t.value.width=s.canvasWidth,await o.value.drawImage(n,...Object.values(s))}},s=(0,n.Fl)((()=>e.state.selectedPhoto));(0,n.YP)(s,(()=>i()));const r=(0,n.Fl)((()=>e.state.typeImage));(0,n.YP)(r,(()=>i()));const l=(0,n.Fl)((()=>e.state.activePhotos));return{selectedPhoto:s,activePhotos:l,myCanvas:t,myContext:o,parent:a}}};const Fe=(0,_.Z)(Ze,[["render",fe],["__scopeId","data-v-4e00d4ca"]]);var Se=Fe,We={name:"App",components:{sideBar:ge,viewImage:Se},setup(){const e=(0,u.oR)(),t=["activePhotos","selectedPhotoIdx","selectedPhoto","typeImage"];(0,n.bv)((async()=>{await e.dispatch("loadFilesById",0),t.map((t=>{e.commit("getLocalStorageItem",t)}))}))}};const ke=(0,_.Z)(We,[["render",s]]);var Ce=ke,Oe=o(669),qe=o.n(Oe);var je=(0,u.MT)({state:{files:[],activePhotos:[],selectedPhoto:null,selectedPhotoIdx:0,typeImage:"xy"},mutations:{getLocalStorageItem(e,t){const o=localStorage.getItem(t);o&&(e[t]=JSON.parse(o))},setLocalStoragePhotosItems(e){localStorage.setItem("activePhotos",JSON.stringify(e.activePhotos)),localStorage.setItem("selectedPhotoIdx",JSON.stringify(e.selectedPhotoIdx)),localStorage.setItem("selectedPhoto",JSON.stringify(e.selectedPhoto))},addFiles(e,[t,o]){e.files[t]=o},selectPhoto(e,t){e.activePhotos=e.files[t.parentId].filter((e=>"jpg"===e.type)),e.selectedPhotoIdx=e.activePhotos.indexOf(t),e.selectedPhoto=t},nextPhoto(e){if(e.selectedPhotoIdx===e.activePhotos.length-1)return e.selectedPhotoIdx=0,void(e.selectedPhoto=e.activePhotos[0]);e.selectedPhotoIdx++,e.selectedPhoto=e.activePhotos[e.selectedPhotoIdx]},prevPhoto(e){if(0===e.selectedPhotoIdx)return e.selectedPhotoIdx=e.activePhotos.length-1,void(e.selectedPhoto=e.activePhotos[e.activePhotos.length-1]);e.selectedPhotoIdx--,e.selectedPhoto=e.activePhotos[e.selectedPhotoIdx]},changeTypeImage(e,t){e.typeImage=t,localStorage.setItem("typeImage",JSON.stringify(e.typeImage))}},actions:{async loadFilesById({state:e,commit:t},o){if(e.files[o])return e.files[o];let a=await qe().get(`https://test-photoz-default-rtdb.firebaseio.com/files/${o}.json`);return a.data?(a=Object.values(a.data).filter((e=>null!==e)),t("addFiles",[o,a]),a):(t("addFiles",[o,a.data]),[])}},getters:{activeFolderId(e){return e.selectedFolder?.id||0},imgUrl(e){return`https://firebasestorage.googleapis.com/v0/b/test-photoz.appspot.com/o/${e.selectedPhoto.parentId}%2F${e.selectedPhoto.name}.jpg?alt=media`||""}},modules:{}});(0,a.ri)(Ce).use(je).mount("#app")}},t={};function o(a){var n=t[a];if(void 0!==n)return n.exports;var i=t[a]={exports:{}};return e[a](i,i.exports,o),i.exports}o.m=e,function(){var e=[];o.O=function(t,a,n,i){if(!a){var s=1/0;for(d=0;d<e.length;d++){a=e[d][0],n=e[d][1],i=e[d][2];for(var r=!0,l=0;l<a.length;l++)(!1&i||s>=i)&&Object.keys(o.O).every((function(e){return o.O[e](a[l])}))?a.splice(l--,1):(r=!1,i<s&&(s=i));if(r){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[a,n,i]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,a){var n,i,s=a[0],r=a[1],l=a[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(n in r)o.o(r,n)&&(o.m[n]=r[n]);if(l)var d=l(o)}for(t&&t(a);c<s.length;c++)i=s[c],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(d)},a=self["webpackChunktest_photo"]=self["webpackChunktest_photo"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=o.O(void 0,[998],(function(){return o(936)}));a=o.O(a)})();
//# sourceMappingURL=app.6fb66509.js.map